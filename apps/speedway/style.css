/* =========================================================
   Speedway â€” glass-styled page (themes removed)
   ========================================================= */

:root {
  --speedway-background: linear-gradient(180deg, var(--brand-background, #f4f7f6) 0%, var(--brand-surface, #ffffff) 100%);
  --speedway-track: var(--brand-surface, #ffffff);
  --speedway-lane-color: #bdc3c7;
  --speedway-accent: var(--brand-accent, #3498db);
  --lane-alpha: rgba(189, 195, 199, .55);
}

/* Header-safe anchor offset */
html { scroll-padding-top: calc(var(--header-h, 64px) + 12px); }

body {
  font-family: var(--brand-font-family, 'Nunito', system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif);
  text-align: center;
  background: var(--speedway-background);
  color: var(--brand-text, #34495e);
  margin: 0;
  display: flex;
  flex-direction: column;
  align-items: center;
  min-height: 100dvh;
  overflow-x: hidden;
  -webkit-font-smoothing: antialiased;
  text-rendering: optimizeLegibility;
}

h1 {
  font-size: clamp(2rem, 2.6rem, 3rem);
  margin: calc(var(--header-h, 64px) + 12px) 0 18px;
  color: var(--speedway-accent, #3498db);
  font-weight: 800;
  text-align: center;
  text-shadow: 0 1px 1px rgba(255,255,255,.35);
}
@media (prefers-color-scheme: dark) {
  h1 { text-shadow: 0 1px 1px rgba(0,0,0,.45); }
}

/* Settings button (glassy) */
#settingsToggleBtn {
  display: inline-block;
  padding: 10px 18px;
  font-size: 1rem;
  font-weight: 700;
  color: #fff;
  border: 1px solid rgba(255,255,255,.25);
  border-radius: var(--radius-md, 10px);
  background: linear-gradient(to bottom right, rgba(52,152,219,.9), rgba(41,128,185,.9));
  backdrop-filter: blur(var(--glass-blur, 14px)) saturate(160%);
  -webkit-backdrop-filter: blur(var(--glass-blur, 14px)) saturate(160%);
  box-shadow: 0 10px 24px rgba(0,0,0,.12);
  transition: transform .2s ease, box-shadow .2s ease, background-color .3s ease;
}
#settingsToggleBtn:hover,
#settingsToggleBtn:focus-visible {
  outline: none;
  transform: translateY(-2px);
  box-shadow: 0 14px 28px rgba(0,0,0,.16);
}

/* Config panel */
#config-area {
  position: fixed;
  top: calc(var(--header-h, 64px) + 10px);
  right: clamp(10px, 4vw, 28px);
  z-index: 30;
  background: var(--glass-bg-strong, rgba(255,255,255,.18));
  border: 1px solid var(--glass-border, rgba(255,255,255,.38));
  backdrop-filter: blur(var(--glass-blur, 14px)) saturate(160%);
  -webkit-backdrop-filter: blur(var(--glass-blur, 14px)) saturate(160%);
  border-radius: var(--radius-lg, 15px);
  box-shadow: var(--glass-shadow, 0 8px 30px rgba(0,0,0,.15));
  padding: 22px 26px;
  max-width: 500px;
  max-height: calc(100dvh - (var(--header-h, 64px) + 24px));
  overflow: auto;
  text-align: left;
}
#config-area label {
  display: block;
  margin-bottom: 8px;
  font-size: 1rem;
  color: var(--brand-subtle-text, #7f8c8d);
  font-weight: 700;
}
#config-area textarea {
  width: 100%;
  min-height: 80px;
  padding: 10px;
  border-radius: 8px;
  border: 1px solid var(--brand-border, #dde4eb);
  background: rgba(255,255,255,.92);
  color: var(--brand-text, #34495e);
  font-size: .95rem;
  box-sizing: border-box;
  margin-bottom: 12px;
}

.config-hidden { display: none; }

/* Layout */
.game-layout {
  display: flex;
  width: 90%;
  max-width: 1100px;
  gap: 24px;
  margin: 18px 0;
  align-items: flex-start;
}

/* Track container â€” glass frame + lanes overlay */
#track-container {
  position: relative;
  flex: 2; min-width: 0;
  width: 90%;
  margin: 0;
  padding: 20px 0;

  background: var(--glass-bg-strong, rgba(255,255,255,.18));
  border: 1px solid var(--glass-border, rgba(255,255,255,.38));
  border-radius: var(--radius-lg, 15px);
  box-shadow: var(--glass-shadow, 0 8px 30px rgba(0,0,0,.15));
  backdrop-filter: blur(var(--glass-blur, 14px)) saturate(160%);
  -webkit-backdrop-filter: blur(var(--glass-blur, 14px)) saturate(160%);
}

/* Lanes overlay */
#track-container::before {
  content: "";
  position: absolute; inset: 12px;
  border-radius: calc(var(--radius-lg, 15px) - 8px);
  background:
    repeating-linear-gradient(
      to bottom,
      transparent 0,
      transparent 45px,
      var(--lane-alpha) 45px,
      var(--lane-alpha) 47px
    ),
    linear-gradient(180deg, color-mix(in srgb, var(--speedway-track, #ffffff) 88%, transparent), rgba(255,255,255,.92));
  pointer-events: none;
}

/* Racers */
.racer {
  position: absolute;
  width: 86px; height: 30px;
  border-radius: 15px;
  display: flex; align-items: center; justify-content: center;
  box-shadow: 0 2px 4px rgba(0,0,0,.15);
  transition: left .1s linear, transform .2s ease;
  color: #ffffff;
}
.racer.finished {
  box-shadow: 0 0 18px rgba(0,0,0,.35), 0 0 24px rgba(52,152,219,.6);
  transform: scale(1.06);
}
.racer-emoji { font-size: 24px; }
.racer-name  {
  font-size: .72em; margin-left: 4px; text-transform: uppercase;
  filter: drop-shadow(1px 1px 0 rgba(0,0,0,.45));
}

/* Start/finish lines */
#start-line, #finish-line-visual {
  position: absolute; top: 12px; bottom: 12px; width: 4px;
  background: var(--speedway-lane-color, #bdc3c7);
}
#start-line { left: 5%; }
#finish-line-visual { right: 5%; }

/* Results â€” glass card */
#results-area {
  background: var(--glass-bg, rgba(255,255,255,.12));
  border: 1px solid var(--glass-border, rgba(255,255,255,.38));
  border-radius: var(--radius-lg, 15px);
  box-shadow: var(--glass-shadow, 0 8px 30px rgba(0,0,0,.15));
  padding: 16px;
  flex: 1; min-width: 120px; max-width: 220px;
  margin: 0;
  text-align: left;
}
#results-area h2 { color: var(--speedway-accent, #3498db); margin: 0 0 8px; }

/* PiP trigger (glassy) */
#results-area .pip-trigger {
  width: 100%; margin: 12px 0 14px; padding: 10px 18px;
  background: linear-gradient(to bottom right, rgba(52,152,219,.9), rgba(41,128,185,.9));
  color: #fff; border: 1px solid rgba(255,255,255,.25); border-radius: 10px;
  font-weight: 800; letter-spacing: .02em;
  display: inline-flex; align-items: center; justify-content: center; gap: 8px;
  box-shadow: 0 10px 22px rgba(0,0,0,.12);
  transition: transform .2s ease, box-shadow .2s ease, background-color .3s ease;
}
#results-area .pip-trigger::before { content: 'ðŸªŸ'; font-size: 1.1em; }
#results-area .pip-trigger:hover,
#results-area .pip-trigger:focus-visible {
  outline: none; transform: translateY(-1px);
  box-shadow: 0 14px 26px rgba(0,0,0,.16);
}

/* Primary buttons (glassy gradient) */
button#startRaceBtn,
button#updateNamesBtn {
  padding: 12px 25px; font-size: 1.2em; font-weight: 800; color: #fff;
  border: 1px solid rgba(255,255,255,.25);
  border-radius: var(--radius-md, 10px);
  cursor: pointer;
  transition: transform .2s ease, box-shadow .2s ease, background-color .3s ease;
  box-shadow: 0 10px 22px rgba(0,0,0,.12);
  backdrop-filter: blur(var(--glass-blur, 14px)) saturate(160%);
  -webkit-backdrop-filter: blur(var(--glass-blur, 14px)) saturate(160%);
  margin-top: 10px;
}
button#startRaceBtn { background: linear-gradient(to bottom right, rgba(52,152,219,.9), rgba(41,128,185,.9)); }
button#updateNamesBtn { background: linear-gradient(to bottom right, rgba(230,126,34,.9), rgba(211,84,0,.9)); }
button#startRaceBtn:hover, button#startRaceBtn:focus-visible,
button#updateNamesBtn:hover, button#updateNamesBtn:focus-visible {
  outline: none; transform: translateY(-2px);
  box-shadow: 0 14px 28px rgba(0,0,0,.16);
}
button#startRaceBtn:disabled { background: #95a5a6; cursor: not-allowed; }

/* Order list */
#standupOrderList {
  list-style: decimal inside; padding-left: 0;
  color: var(--brand-text, #34495e);
}
#standupOrderList li {
  font-size: 1.05em; margin-bottom: 8px;
  color: var(--speedway-accent, #2980b9); font-weight: 700;
}
#standupOrderList li.finished-entry {
  background: rgba(255,255,255,.65);
  border-left: 4px solid var(--speedway-accent, #3498db);
  border-radius: 6px;
  padding: 6px 10px; color: #2d2d2d;
}

/* SEO content â€” glass card */
.seo-content-area {
  background: var(--glass-bg, rgba(255,255,255,.12));
  border: 1px solid var(--glass-border, rgba(255,255,255,.38));
  border-radius: var(--radius-lg, 15px);
  box-shadow: var(--glass-shadow, 0 8px 30px rgba(0,0,0,.15));
  padding: 24px 28px;
  max-width: 780px; width: min(92%, 780px);
  margin: 28px auto 0; text-align: left; line-height: 1.7;
}
.seo-content-area h2 {
  color: var(--speedway-accent, #3498db);
  margin: 0 0 12px; font-size: 1.6rem; text-align: center;
}
.seo-content-area h3 { color: #2980b9; margin: 18px 0 8px; font-size: 1.25rem; }
.seo-content-area a { color: #2980b9; text-decoration: none; font-weight: 700; }
.seo-content-area a:hover { text-decoration: underline; }

/* Responsive */
@media (max-width: 820px) {
  #config-area {
    position: relative; top: auto; right: auto;
    margin: 10px auto 14px; width: min(95%, 560px);
    max-height: none;
  }
  .game-layout { flex-direction: column; align-items: center; width: 100%; gap: 16px; }
  #track-container, #results-area { flex: none; width: 95%; max-width: none; }
}
@media (max-width: 520px) {
  h1 { margin-top: calc(var(--header-h, 64px) + 8px); font-size: 1.9rem; }
  .racer { height: 26px; width: 76px; }
  .seo-content-area { padding: 18px 16px; }
}
@media (max-width: 390px) {
  .racer { height: 22px; width: 66px; }
  #standupOrderList li { font-size: .95em; }
}

/* Dark mode */
@media (prefers-color-scheme: dark) {
  body { background: #0b1220; color: var(--gray-900, #e5e7eb); }
}

/* Reduced motion */
@media (prefers-reduced-motion: reduce) {
  #settingsToggleBtn,
  .pip-trigger,
  button#startRaceBtn,
  button#updateNamesBtn,
  .racer { transition: none !important; transform: none !important; }
}
