<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    {% set pageTitle = "Speedway Racer ‚Äì Turtle Stand-up Order Game | Daily Pick" %}
    {% set pageDescription = "Launch a turtle race name picker that randomizes speaking order, rewards winners, and energizes hybrid stand-ups with playful suspense." %}
    {% set ogImage = "https://dailypick.dev/assets/og-image-main.png" %}
    {% set ogImageAlt = "Colorful turtle racers sprinting on the Daily Pick Speedway track" %}
    <title>{{ pageTitle | seoTitle }}</title>
    <meta name="description"
        content="{{ pageDescription | seoDescription }}">
    <meta name="keywords"
        content="turtle race name picker, speedway racer, random name picker, stand-up order game, turtle racing, agile icebreaker, meeting energizer, classroom participation game, remote team activity, Daily Pick tools, fair speaking order">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://dailypick.dev/apps/speedway/">
    <meta property="og:title" content="{{ pageTitle | seoTitle }}">
    <meta property="og:description"
        content="{{ pageDescription | seoDescription }}">
    <meta property="og:image" content="{{ ogImage }}">
    <meta property="og:image:alt"
        content="{{ ogImageAlt }}">
    <meta property="og:site_name" content="Daily Pick">

    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:url" content="https://dailypick.dev/apps/speedway/">
    <meta name="twitter:title" content="{{ pageTitle | seoTitle }}">
    <meta name="twitter:description"
        content="{{ pageDescription | seoDescription }}">
    <meta name="twitter:image" content="{{ ogImage }}">
    <meta name="twitter:image:alt"
        content="{{ ogImageAlt }}">

    <link rel="canonical" href="https://dailypick.dev/apps/speedway/">
    <!-- Favicon Links -->
    <link rel="apple-touch-icon" sizes="180x180" href="/assets/favicon/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/assets/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/assets/favicon/favicon-16x16.png">
    <link rel="manifest" href="/assets/favicon/site.webmanifest">
    <link rel="shortcut icon" href="/assets/favicon/favicon.ico">
    <meta name="msapplication-TileColor" content="#2d89ef">
    <meta name="theme-color" content="#ffffff">

    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/assets/css/theme.css">
    <link rel="stylesheet" href="/assets/css/glass.css">
    <link rel="stylesheet" href="style.css">
    <script src="/assets/js/brand-config.js" defer></script>
    <script src="/assets/js/results-pip.js" defer></script>
    <!-- (Optional) Collaboration includes ‚Äî keep if used elsewhere -->
    <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
    <link rel="stylesheet" href="/assets/css/collaboration.css">
    <script src="/assets/js/collaboration.js" defer></script>

    <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebApplication",
    "name": "Speedway Racer",
    "operatingSystem": "Any",
    "applicationCategory": "GameApplication",
    "url": "https://dailypick.dev/apps/speedway/",
    "image": "https://dailypick.dev/assets/og-image-main.png",
    "description": "Play Speedway Racer by Daily Pick‚Äîa turtle racing game that randomizes speaking order and keeps teams engaged.",
    "publisher": {
      "@type": "Organization",
      "name": "Daily Pick",
      "url": "https://dailypick.dev"
    }
  }
  </script>
</head>

<body>
    {% include "bg-orbs.html" %}
    {% include "header.html" %}

    <h1>üèÅ Speedway: Turtle Race Name Picker üèÅ</h1>
    <p class="settings-hint">Update racers or your brand once in the <a href="/apps/settings/">Settings page</a>, then come back to race.</p>
    <div class="game-layout">
        <div id="track-container" aria-label="Racing track">
            <div id="start-line"></div>
            <div id="finish-line-visual"></div>
            <!-- Racers injected by JS -->
        </div>

        <div id="results-area" aria-live="polite" aria-atomic="true">
            <h2>Order:</h2>
            <button id="speedwayPipBtn" class="pip-trigger" type="button" data-pip-target="#results-area"
                data-pip-title="Speedway Results" data-pip-exclude="#speedwayPipBtn" data-pip-width="320"
                data-pip-height="420">Open in Picture in Picture</button>
            <ol id="standupOrderList"></ol>
        </div>
    </div>

    <button id="startRaceBtn">üöÄ Start Race!</button>

    <div class="seo-content-area">
        <h2>Speedway Racer Keeps Stand-ups Moving</h2>
        <p><strong>Speedway Racer</strong> turns the speaking order into a playful turtle sprint so every teammate gets
            airtime without awkward pauses.</p>

        <h3>Quick Setup</h3>
        <p>Load your roster, hit Start Race, and screen-share the animated finish line. Picture-in-Picture keeps the
            results visible while you move on to updates or demos.</p>

        <h3>What Teams Love</h3>
        <ul>
            <li><strong>Fair finishes:</strong> Randomized results keep retros, classes, and giveaways equitable.</li>
            <li><strong>Instant energy:</strong> Turtle racers and emoji reactions lift the mood before status reports.</li>
            <li><strong>Hybrid ready:</strong> Works in person or remote thanks to easy links and replayable rounds.</li>
            <li><strong>Effortless resets:</strong> Start another sprint in seconds when you need a fresh speaking order.</li>
        </ul>

        <p>Pair the Speedway sprint with the <a href="/apps/wheel/">Decision Wheel</a> or a quick round of <a href="/apps/trap/">Trap!</a>
            to keep rituals feeling fresh.</p>

        <p>Fire up the track and let this <strong>turtle stand-up game</strong> decide who shares next with a smile.</p>
    </div>
    {% include "footer.html" %}

    <script>
        "use strict";

        /** ====== Config & State (themes removed) ====== */
        const DEFAULT_NAMES = ['Kate', 'Andre', 'Juan', 'Dmytro', 'Vetura', 'Zachary', 'Lindsay'];
        const LOCAL_STORAGE_KEY = 'namesList';

        /** Single cohesive palette */
        const RACER_PALETTE = ['#e74c3c', '#3498db', '#2ecc71', '#f1c40f', '#9b59b6', '#e67e22'];

        let originalNames = [...DEFAULT_NAMES];
        let racersData = [];
        let raceInProgress = false;
        let animationFrameId = null;

        /** ====== DOM ====== */
        const trackContainer = document.getElementById('track-container');
        const startRaceBtn = document.getElementById('startRaceBtn');
        const standupOrderList = document.getElementById('standupOrderList');
        const namesInput = document.getElementById('namesInput');
        const updateNamesBtn = document.getElementById('updateNamesBtn');
        const syncNamesInput = () => {
            if (namesInput) {
                namesInput.value = originalNames.join('\n');
            }
        };

        const finishLinePercent = 90;

        /** ====== Names storage ====== */
        function loadNamesFromStorage() {
            const stored = localStorage.getItem(LOCAL_STORAGE_KEY);
            if (!stored) {
                syncNamesInput();
                return;
            }
            try {
                const parsed = JSON.parse(stored);
                if (Array.isArray(parsed) && parsed.length) {
                    originalNames = [...parsed];
                } else {
                    originalNames = [...DEFAULT_NAMES];
                }
            } catch {
                originalNames = [...DEFAULT_NAMES];
            }
            syncNamesInput();
        }

        function saveNamesToStorage() {
            localStorage.setItem(LOCAL_STORAGE_KEY, JSON.stringify(originalNames));
        }

        /** ====== Racers + Race ====== */
        function setupRacers() {
            // Reset DOM + state
            trackContainer.querySelectorAll('.racer').forEach(el => el.remove());
            racersData = [];
            standupOrderList.innerHTML = '';
            startRaceBtn.disabled = originalNames.length === 0;
            startRaceBtn.textContent = 'üöÄ Start Race!';

            if (originalNames.length === 0) {
                trackContainer.style.height = '120px';
                return;
            }

            const racerHeight = 30;
            const verticalGap = 10;
            const totalHeight = originalNames.length * (racerHeight + verticalGap) - verticalGap;
            trackContainer.style.height = `${Math.max(150, totalHeight + 40)}px`;

            originalNames.forEach((name, index) => {
                const racer = document.createElement('div');
                racer.classList.add('racer');
                racer.innerHTML = `<span class="racer-emoji">üê¢</span><span class="racer-name">${name.substring(0, 3)}</span>`;
                racer.style.backgroundColor = RACER_PALETTE[index % RACER_PALETTE.length];
                racer.style.left = '5%';
                racer.style.top = `${20 + index * (racerHeight + verticalGap)}px`;

                trackContainer.appendChild(racer);
                racersData.push({
                    name,
                    element: racer,
                    positionPercent: 5,
                    finished: false,
                    finishTime: 0
                });
            });
        }

        function raceTick() {
            if (!raceInProgress) return;

            let allFinished = true;

            racersData.forEach((racer) => {
                if (racer.finished) return;

                allFinished = false;
                const randomBoost = (Math.random() * 0.4) - 0.1;
                racer.positionPercent += randomBoost;
                racer.element.style.left = `${racer.positionPercent}%`;

                if (racer.positionPercent >= finishLinePercent) {
                    racer.finished = true;
                    racer.finishTime = performance.now();
                    racer.element.style.left = `${finishLinePercent}%`;
                    racer.element.classList.add('finished');

                    const li = document.createElement('li');
                    li.textContent = racer.name;
                    li.classList.add('finished-entry');
                    standupOrderList.appendChild(li);
                }
            });

            if (allFinished) {
                raceInProgress = false;
                startRaceBtn.disabled = false;
                startRaceBtn.textContent = 'üèÅ Race Again!';
                cancelAnimationFrame(animationFrameId);
            } else {
                animationFrameId = requestAnimationFrame(raceTick);
            }
        }

        /** ====== Interactions ====== */
        function updateNamesFromInput() {
            if (!namesInput) return;
            const input = namesInput.value.trim();
            const parsed = input
                ? input.split(/[\n,]+/).map(n => n.trim()).filter(Boolean)
                : [];
            originalNames = parsed.length ? parsed : [...DEFAULT_NAMES];
            syncNamesInput();
            saveNamesToStorage();
            setupRacers();
            if (raceInProgress) {
                raceInProgress = false;
                cancelAnimationFrame(animationFrameId);
            }
        }

        /** ====== Event wiring ====== */
        startRaceBtn.addEventListener('click', () => {
            if (raceInProgress) return;
            raceInProgress = true;
            startRaceBtn.disabled = true;
            startRaceBtn.textContent = 'üö¶ Racing...';
            setupRacers(); // fresh run each time
            animationFrameId = requestAnimationFrame(raceTick);
        });

        if (updateNamesBtn && namesInput) {
            updateNamesBtn.addEventListener('click', updateNamesFromInput);
        }

        /** ====== Init ====== */
        loadNamesFromStorage();
        setupRacers();
    </script>
</body>

</html>
