<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Stand-up Speedway</title>
<style>
 body {
   font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
   text-align: center;
   background: #2c3e50;
   color: #ecf0f1;
   margin: 0;
   padding: 20px;
   display: flex;
   flex-direction: column;
   align-items: center;
 }
 h1 {
   color: #e74c3c;
 }
 #track-container {
   width: 80%;
   max-width: 700px;
   height: auto; /* Adjust based on number of racers */
   background: #34495e;
   border: 5px solid #2c3e50;
   border-radius: 10px;
   margin: 20px auto;
   position: relative;
   padding: 20px 0; /* Padding for top/bottom space */
   box-shadow: 0 5px 15px rgba(0,0,0,0.2);
 }
 .racer {
   position: absolute; /* JS will set top and left */
   width: 80px; /* Increased width for name + emoji */
   height: 30px; /* Adjusted for turtle shape */
   background-color: #6B8E23; /* Turtle green (Olive Drab) */
   border-radius: 15px; /* Rounded shape for a simple turtle body */
   display: flex;
   align-items: center;
   justify-content: center; /* Keep centered for now, can adjust */
   box-shadow: 0 2px 4px rgba(0,0,0,0.3);
   transition: left 0.1s linear; /* Smooths out the movement slightly */
 }
 #start-line, #finish-line-visual {
   position: absolute;
   top: 0;
   bottom: 0;
   width: 4px;
   background-color: #ecf0f1;
 }
 #start-line { left: 5%; }
 #finish-line-visual { right: 5%; }

 #controls, #results-area {
   margin-top: 20px;
   background: #34495e;
   padding: 15px;
   border-radius: 8px;
   box-shadow: 0 3px 10px rgba(0,0,0,0.2);
 }
 #startRaceBtn {
   padding: 12px 25px;
   font-size: 1.2em;
   background: #2ecc71;
   color: white;
   border: none;
   border-radius: 8px;
   cursor: pointer;
   transition: background 0.3s;
 }
 #startRaceBtn:hover {
   background: #27ae60;
 }
 #startRaceBtn:disabled {
   background: #95a5a6;
   cursor: not-allowed;
 }
 #standupOrderList {
   list-style-type: decimal;
   padding-left: 20px;
   text-align: left;
 }
 #standupOrderList li {
   font-size: 1.1em;
   margin-bottom: 5px;
   color: #f1c40f;
 }
</style>
</head>
<body>

<h1>üèÅ Stand-up Speedway üèÅ</h1>

<div id="track-container">
 <div id="start-line"></div>
 <div id="finish-line-visual"></div>
 <!-- Racers will be dynamically added here by JS -->
</div>

<div id="controls">
 <button id="startRaceBtn">üöÄ Start Race!</button>
</div>

<div id="results-area">
 <h2>Stand-up Order:</h2>
 <ol id="standupOrderList"></ol>
</div>

<script>
 const team = ['Kate', 'Andre', 'Juan', 'Dmytro', 'Vetura', 'Zachary', 'Lindsay'];
 let racersData = []; // To store { name, element, position, finished, finishTime }
 let raceInProgress = false;
 let animationFrameId = null;

 const trackContainer = document.getElementById('track-container');
 const startRaceBtn = document.getElementById('startRaceBtn');
 const standupOrderList = document.getElementById('standupOrderList');
  // Calculate finish line based on percentage to be responsive
 const finishLinePercent = 90; // 90% of track width

 function setupRacers() {
   trackContainer.querySelectorAll('.racer').forEach(el => el.remove()); // Clear old racers
   racersData = [];
   standupOrderList.innerHTML = ''; // Clear previous results

   const racerHeight = 30; // Adjusted to match new CSS height
   const verticalGap = 10;
   const totalRacersHeight = team.length * (racerHeight + verticalGap) - verticalGap;
   trackContainer.style.height = `${Math.max(150, totalRacersHeight + 40)}px`; // +40 for padding

   team.forEach((name, index) => {
     const racerElement = document.createElement('div');
     racerElement.classList.add('racer');
     // Display turtle emoji and then the first 3 letters of the name
     racerElement.innerHTML = `<span style="font-size: 24px;">üê¢</span><span style="font-size: 0.7em; margin-left: 4px;">${name.substring(0, 3)}</span>`;
     // Removed dynamic background color to use the CSS green for all turtles
    
     // Position racers at the start line (5% from left)
     racerElement.style.left = `5%`;
     racerElement.style.top = `${20 + index * (racerHeight + verticalGap)}px`; // Stagger vertically

     trackContainer.appendChild(racerElement);
     racersData.push({
       name: name,
       element: racerElement,
       positionPercent: 5, // Start at 5%
       finished: false,
       finishTime: 0
     });
   });
 }

 function raceTick() {
   if (!raceInProgress) return;

   let allFinished = true;
   const trackWidth = trackContainer.offsetWidth;

   racersData.forEach(racer => {
     if (!racer.finished) {
       allFinished = false;
       // Move by a random small percentage of the track width
       const randomBoost = (Math.random() * 0.7) + 0.2; // Move between 0.2% and 0.7% of track width
       racer.positionPercent += randomBoost;
       racer.element.style.left = `${racer.positionPercent}%`;

       if (racer.positionPercent >= finishLinePercent) {
         racer.finished = true;
         racer.finishTime = performance.now(); // More precise timing
         racer.element.style.left = `${finishLinePercent}%`; // Snap to finish line

         // Add to results - we'll sort later for display if needed, or just append
         const listItem = document.createElement('li');
         listItem.textContent = racer.name;
         standupOrderList.appendChild(listItem); // Appends as they finish
       }
     }
   });

   if (allFinished) {
     raceInProgress = false;
     startRaceBtn.disabled = false;
     startRaceBtn.textContent = "üèÅ Race Again!";
     // Sort and display final order if needed (currently appends as they finish)
     // For example, if you wanted to sort by finishTime strictly:
     // racersData.sort((a, b) => a.finishTime - b.finishTime);
     // standupOrderList.innerHTML = ''; // Clear and re-populate
     // racersData.forEach(r => { /* ... add li ... */ });
     cancelAnimationFrame(animationFrameId);
   } else {
     animationFrameId = requestAnimationFrame(raceTick);
   }
 }

 startRaceBtn.addEventListener('click', () => {
   if (raceInProgress) return;

   raceInProgress = true;
   startRaceBtn.disabled = true;
   startRaceBtn.textContent = "üö¶ Racing...";
  
   // Reset racers for a new race
   setupRacers(); // This also clears the results list

   animationFrameId = requestAnimationFrame(raceTick);
 });

 // Initial setup
 setupRacers();
</script>

</body>
</html>
